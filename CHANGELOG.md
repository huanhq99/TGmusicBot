# Changelog

该项目遵循半结构化更新记录：记录功能亮点、重要修复与 Breaking Changes。若需了解更细的提交详情，请参阅 Git 历史或 GitHub Releases。

## [Unreleased]
- 文档：明确音乐中转必须独立部署，并更新 `deploy/docker-compose.extras.yml` 只保留本地 Bot API / 整理器挂载示例。

## [1.7.8] - 2024-XX-XX
### 新增
- `TELEGRAM_BOT_TOKEN` 环境变量（兼容旧 `TELEGRAM_TOKEN`）。
- Web 面板“发送测试通知”按钮，便于排查 Webhook。

### 改进
- Webhook 改为直接调用 Telegram HTTP API，脱离 Bot 实例共享限制。
- 多项网易云 / QQ 音乐下载稳定性、元数据写入、Webhook 队列表现优化。

## [1.5.8] - 2023-XX-XX
### 新增
- QQ 音乐独立音质设置。
- 设置页面展示网易云 / QQ 账号与音质的并排视图。

### 改进
- 下载目录配置复用，移除重复区块，界面更紧凑。

## [1.5.7] - 2023-XX-XX
### 新增
- 网易云 Cookie 刷新功能。
- Web 端歌单订阅管理页，可启用 / 禁用 / 删除。

### 改进
- 定时同步作业更可靠，每 6 小时检查歌单更新。

## [1.5.6] - 2023-XX-XX
### 新增
- QQ 音乐扫码登录与 Cookie 刷新流程。

### 改进
- Cookie 输入模板预填 `uin=`、`qm_keyst=` 等字段。

## [1.5.5] - 2023-XX-XX
### 新增
- QQ 音乐扫码登录（延长 Cookie 有效期）。
- Cookie 刷新（可延长到 90 天）。

### 改进
- 关于页面功能列表与版本号展示。

## [1.5.4] - 2023-XX-XX
### 新增
- Spotify 歌单同步。
- 网易云失败自动切换 QQ 音乐的跨平台下载链路。
- Hi-Res / Master / Dolby 等更多音质选项。
- 未匹配歌曲分页列表。

### 改进
- Cookie 获取指引更新至 DevTools Application 标签页。

## [1.5.3] - 2023-XX-XX
### 新增
- Emby Webhook 实时入库通知。
- 歌单同步申请功能（用户申请、管理员审批）。
- 下载历史记录页面。

## [1.5.2] - 2023-XX-XX
### 新增
- 下载失败一键重试。
- 搜索 / 下载记录自动写入历史。

### 修复
- 文件整理模式下音频预览不可用的问题。

## [1.5.0] - 2023-XX-XX
### 新增
- 搜索结果 3 分钟缓存，降低重复请求。
- 定时任务系统全面升级：歌单订阅状态修复，Cookie 过期检查提前。

### 修复
- 下载统计图表高度错位。

## [1.4.x] - 2022-XX-XX
### 新增
- 文件整理器（监控目录、模板、自动提取封面）。
- 下载统计页面、每日 9:00 例行报表与 Cookie 告警。
- Telegram Inline 搜索模式、下载历史、请求管理。

### 改进
- Web 亮暗主题切换、移动端适配。
- Pyrogram 超时、大文件上传、Webhook 通知可靠性。
- watchdog 目录监控支持，整理完成通知策略调整。

## [1.3.0] - 2022-XX-XX
- Web 亮暗主题、Cookie 健康检查、下载统计等初版 UI 大改。

## [1.2.0] - 2022-XX-XX
- 下载管理器、队列 / 历史查询命令（`/ds`、`/dq`、`/dh`）。
- Cookie 状态监控、自动重试、架构重构。

## [1.0.9] - 2021-XX-XX
- Emby 自动扫描、`/scaninterval` 命令与 Web 设置项。

## [1.0.8] - 2021-XX-XX
- Web 登录保护、上传权限、`/request` & `/myrequests` 工作流、Pyrogram 2GB 上传。

## [1.0.6 - 1.0.7] - 2021-XX-XX
- `/search` `/album` 搜索下载、定时同步、下载进度 / 扫库自动化。
- Telegram Local Bot API Server 支持、Cookie 登入体验优化。

## [1.0.5] - 2021-XX-XX
- 网易云自动补齐缺失歌曲、MusicTag 集成、可配置音质。

## [1.0.0] - 2021-XX-XX
- 初版 Web 管理界面与网易云登录。

---

> 日期以 `XX-XX` 代替具体日，因为历史提交中未记录精确发布日，可在 Git 标签或 Releases 中查到实际时间。
